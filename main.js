(()=>{"use strict";const e=()=>{const e=function(){let e=new Array(100);for(let n=0;n<e.length;n++)e[n]={containShip:!1,hasBeenHit:!1};return e}(),n=[];let t=!1;function r(){return n.length}function o(e){switch(e){case 0:return{length:5,name:"Carrier"};case 1:return{length:4,name:"Battleship"};case 2:return{length:3,name:"Cruiser"};case 3:return{length:3,name:"Submarine"};case 4:return{length:2,name:"Destroyer"};default:console.log("this should never be printed")}}return{placeShip:function(a){const{name:c,length:i}=o(r());a=parseFloat(a);for(let n=0;n<i;n++)if(!0===t){let t=10*n;e[a+t].containShip=!0,e[a+t].shipName=c,e[a+t].position=n}else e[a+n].containShip=!0,e[a+n].shipName=c,e[a+n].position=n;n.push({name:c,length:i})},toggleVertical:function(){t=!0!==t},verticalStatus:function(){return t},getNumOfShips:r,getShipInfo:o,receiveAttack:function(t){if(!1===e[t].hasBeenHit)return e[t].hasBeenHit=!0,!0===e[t].containShip&&(function(e){const t=n.filter((n=>n.name===e));console.log(t,"sdfsdffd");const r=t[0];console.log(r,"sfsfdsfdsf")}(e[t].shipName),console.log(name),!0)},isAllSunk:function(){return!1},board:e,ships:n}},n=(e,n)=>{function t(e){return!0!==e.hasBeenHit}function r(e){const t=parseFloat(e),{length:r}=n.getShipInfo(n.getNumOfShips());if(n.verticalStatus()){for(let e=0;e<r;e++){const r=10*e+t;if(r>n.board.length-1)return console.log("out of bounds",r),!1;if(!0===n.board[r].containShip)return console.log("ship in path",r),!1}return!0}{let e=(o=t,parseFloat(Math.trunc(o/10)+"9"));for(let o=0;o<r;o++){if(t+o>e)return console.log("wrap error",t+o),!1;if(!0===n.board[t+o].containShip)return console.log("ship in path",t+o),!1}return!0}var o}return"Computer"===e?{name:e,boardInfo:n,checkMove:t,generateMove:function(){return Math.floor(99*Math.random())},checkShipPlacement:r}:{name:e,boardInfo:n,checkMove:t,checkShipPlacement:r}},t=(()=>{const e=document.querySelector(".container");return{updateBoardColor:function(e,n){e.style.backgroundColor=!1===n?"rgb(178, 34, 34)":"rgb(51, 204, 51)"},renderBoard:function(n){let t=document.createElement("div");t.classList="board",t.setAttribute("id",n);for(let e=0;e<=99;e++){let n=document.createElement("div");n.classList=e,t.appendChild(n)}e.append(t)}}})();(()=>{const r={};function o(){return r[`${r.currentPlayer}`].name}function a(){return"player"===r.currentPlayer?r.cpu.name:r.player.name}function c(){return"player"===r.currentPlayer?r.cpu:r.player}function i(){"Computer"!==o()?r.currentPlayer="cpu":r.currentPlayer="player"}function l(){if(r.player.boardInfo.isAllSunk()&&r.cpu.boardInfo.isAllSunk())console.log("made it in here");else switch(r.currentPlayer){case"player":!function(){const e=document.querySelectorAll(`#${a()} div`);function n(t){const r=t.target.className,o=c(),a=o.boardInfo.board;if(o.checkMove(a[r]))return e.forEach((e=>e.removeEventListener("click",n))),void s(t.target,r);alert("Cannot select this node, please try again")}e.forEach((e=>{e.addEventListener("click",n)}))}();break;case"cpu":setTimeout((()=>{!function(){let e;const n=c();do{e=r.cpu.generateMove()}while(!n.checkMove(e));s(document.querySelector(`#${a()} div[class='${e}']`),e)}()}),2e3)}}function s(e,n){const r=c().boardInfo.receiveAttack(n);t.updateBoardColor(e,r),i(),l()}r.player=n("Anon",e()),r.cpu=n("Computer",e()),r.currentPlayer=0===Math.floor(2*Math.random())?"player":"cpu",t.renderBoard(r.player.name),t.renderBoard(r.cpu.name),console.log(`${o()} has been randomly chosen to start first`),function e(){if(5===r.player.boardInfo.getNumOfShips()&&5===r.cpu.boardInfo.getNumOfShips())return console.log("finished placing ships"),void l();!function(){const n=r[`${r.currentPlayer}`],t=document.querySelectorAll(`#${o()} div`);function a(r){n.checkShipPlacement(r.target.className)&&(console.log("passed error checking"),n.boardInfo.placeShip(r.target.className),t.forEach((e=>{e.removeEventListener("click",a)})),i(),e())}"Computer"!==o()?t.forEach((e=>{e.addEventListener("click",a)})):function(){let t;do{r&&n.boardInfo.toggleVertical(),t=n.generateMove()}while(!n.checkShipPlacement(t));function r(){return Math.floor(2*Math.random())}n.boardInfo.placeShip(t),i(),e()}()}()}()})()})();