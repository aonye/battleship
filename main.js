(()=>{"use strict";const e=(e,r)=>({name:e,length:r,hits:new Array(r),hit(e){this.hits[e]||(this.hits[e]="X")},isSunk(){for(let e=0;e<this.hits.length;e++)if(void 0===this.hits[e])return!1;return!0}}),r=()=>{const r={board:function(){let e=new Array(100);for(let r=0;r<e.length;r++)e[r]={containShip:!1,hasBeenHit:!1};return e}(),ships:[],winner:!1,isVertical:!1};return{placeShip:function(t,n,o){let a=e(t,n);for(let e=0;e<a.length;e++)if(!0===r.isVertical){let n=10*e;r.board[o+n].containShip=!0,r.board[o+n].shipName=t,r.board[o+n].position=e}else r.board[o].containShip=!0,r.board[o].shipName=t,r.board[o].position=e;r.ships.push(a)},toggleVertical:function(){!0===r.isVertical?r.isVertical=!1:r.isVertical=!0},receiveAttack:function(e){const t=r.board;if(!1===t[e].hasBeenHit)return t[e].hasBeenHit=!0,!0===t[e].containShip&&((n=t[e].shipName,r.ships.filter((e=>e.name===n))[0]).hit(t[e].position),!0);var n},isAllSunk:function(){let e=r.ships;for(let r=0;r<e.length;r++)if(!1===e[r].isSunk())return!1;return!1},boardInformation:r}},t=e=>{const r={name:e};function t(e){return!0!==e.hasBeenHit}return"Computer"===r.name?{playerInfo:r,checkMove:t,generateMove:function(){return Math.floor(99*Math.random())}}:{playerInfo:r,checkMove:t}},n=(()=>{const e=document.querySelector(".container");return{updateBoardColor:function(e,r){e.style.backgroundColor=!1===r?"rgb(178, 34, 34)":"rgb(51, 204, 51)"},renderBoard:function(r){let t=document.createElement("div");t.classList="board",t.setAttribute("id",r);for(let e=0;e<=99;e++){let r=document.createElement("div");r.classList=e,t.appendChild(r)}e.append(t)}}})();(()=>{const e={};function o(){if(console.log(e.playerBoard.isAllSunk(),e.cpuBoard.isAllSunk()),e.playerBoard.isAllSunk()&&e.cpuBoard.isAllSunk())console.log("made it in here");else switch(e.currentPlayer){case"player":!function(){let r=document.querySelectorAll(`#${e[`${e.currentPlayer}`].playerInfo.name} div`);function t(n){const o=n.target.className,i=e[`${e.currentPlayer}Board`].boardInformation.board;if(e[`${e.currentPlayer}`].checkMove(i[o]))return r.forEach((e=>e.removeEventListener("click",t))),void a(n.target,o);alert("Cannot select this node, please try again")}r.forEach((e=>{e.addEventListener("click",t)}))}();break;case"cpu":setTimeout((()=>{!function(){let r=e.cpu.generateMove();const t=e.cpuBoard.boardInformation.board;for(;!e.cpu.checkMove(t[r]);)console.log(`invalid with ${r}, retrying with....`),r=e.cpu.generateMove(),console.log(r);a(document.querySelector(`#Computer div[class='${r}']`),r)}()}),1)}}function a(r,t){const a=e[`${e.currentPlayer}Board`].receiveAttack(t);n.updateBoardColor(r,a),"player"===e.currentPlayer?e.currentPlayer="cpu":e.currentPlayer="player",o()}e.player=t("Anon"),e.playerBoard=r(),e.cpu=t("Computer"),e.cpuBoard=r(),e.currentPlayer=0===Math.floor(2*Math.random())?"player":"cpu",n.renderBoard(e.player.playerInfo.name),n.renderBoard(e.cpu.playerInfo.name),console.log(`${e.currentPlayer} has been randomly chosen to start first`),o()})()})();